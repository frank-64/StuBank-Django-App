{% extends "dashboard/customer/customer_dashboard_base.html" %}

{% block css %}
{% endblock css %}

{% block content %}

<div class="container" id="main">
        <h1>Category overview</h1>
        <div id="container-categories" style="width: 30%;">
            <canvas id="bar-chart-categories"></canvas>
        </div>

        <h1>Termini overview</h1>
        <div id="container-termini" style="width: 30%;">
            <canvas id="bar-chart-termini"></canvas>
        </div>

        <h1>Spending</h1>
        <div id="container-spending" style="width: 30%;">
            <canvas id="bar-chart-spending"></canvas>
        </div>
</div>






  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
  <script>

    var red_fade = 'rgba(255, 0, 0, 0.5)'
    var red = 'rgba(255, 0, 0, 1)'

    var orange_fade = 'rgba(255, 163, 43, 0.5)'
    var orange = 'rgba(255, 163, 43, 1)'

    var purple_fade = 'rgba(153, 102, 255, 0.5)'
    var purple = 'rgba(153, 102, 255, 1)'

    var green_fade = 'rgba(0, 255, 0, 0.5)'
    var green = 'rgba(0, 255, 0, 1)'


    var categories_config = {
      type: 'bar',
      data: {
        datasets: [{
          data: {{ category_data|safe }},
          backgroundColor: purple_fade,
          borderColor: purple,
          borderWidth: 1,
          label: 'Transactions'
        }],
        labels: {{ category_labels|safe }}
      },
      options: {
        responsive: true,
        legend: {
            display: false
        },
        scales: {
    yAxes: [{
      scaleLabel: {
        display: true,
        labelString: 'Amount Spent - £'
      }
    }]
  }
      }
    };

    var termini_config = {
      type: 'bar',
      data: {
        datasets: [{
          data: {{ termini_data|safe }},
          backgroundColor: orange_fade,
          borderColor: orange,
          borderWidth: 1,
          label: 'Transactions'
        }],
        labels: {{ termini_labels|safe }}
      },
      options: {
        responsive: true,
        legend: {
            display: false
        },
        scales: {
    yAxes: [{
      scaleLabel: {
        display: true,
        labelString: 'Amount Sent - £'
      }
    }]
  }
      }
    };


   var spending_config = {
      type: 'horizontalBar',
      data: {
        datasets: [{
          data: {{ out_in_data|safe }},
          backgroundColor: [red_fade, green_fade],
          borderColor: [red, green],
          borderWidth: 1,
          label: 'Spending'
        }],
        labels: {{ out_in_labels|safe }}
      },
      options: {
        responsive: true,
        legend: {
            display: false
        },
        scales: {
    xAxes: [{
      scaleLabel: {
        display: true,
        labelString: 'Amount - £'
      }
    }]
  }
      }
    };


    window.onload = function() {
      var bar_categories = document.getElementById('bar-chart-categories').getContext('2d');
      window.myBar = new Chart(bar_categories, categories_config);

      var bar_termini = document.getElementById('bar-chart-termini').getContext('2d');
      window.myBar = new Chart(bar_termini, termini_config);

      var bar_spending = document.getElementById('bar-chart-spending').getContext('2d');
      window.myBar = new Chart(bar_spending, spending_config);
    };

  </script>


{% endblock content %}

